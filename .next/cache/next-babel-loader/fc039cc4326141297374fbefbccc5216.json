{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/slnsrn/Documents/Projects/MyGames/GuessNumber/guess-my-number/context/GameContext.tsx\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\n\nvar createNumberArray = function createNumberArray(digits) {\n  var numberArray = [];\n\n  for (var i = 0; i < digits; i++) {\n    numberArray.push({\n      value: Math.floor(Math.random() * 10).toString(),\n      hidden: true\n    });\n  }\n\n  return numberArray;\n};\n\nvar initialState = {\n  player: 'single',\n  digits: 4,\n  rounds: 0,\n  hintsGiven: [],\n  gameStarted: false,\n  numberArray: null,\n  gameResult: null,\n  windowValues: {}\n};\n\nfunction reducer(state, action) {\n  var _state$numberArray;\n\n  switch (action.type) {\n    case 'SET_PLAYER':\n      return _objectSpread({}, state, {\n        player: action.value\n      });\n\n    case 'SET_DIGITS':\n      return _objectSpread({}, state, {\n        digits: action.value\n      });\n\n    case 'SET_ROUNDS':\n      return _objectSpread({}, state, {\n        rounds: action.value\n      });\n\n    case 'START_GAME':\n      return _objectSpread({}, state, {\n        gameStarted: true,\n        numberArray: createNumberArray(state.digits)\n      });\n\n    case 'END_GAME':\n      return _objectSpread({}, state, {\n        numberArray: (_state$numberArray = state.numberArray) === null || _state$numberArray === void 0 ? void 0 : _state$numberArray.map(function (el) {\n          return _objectSpread({}, el, {\n            hidden: false\n          });\n        }),\n        gameResult: action.value ? 'won' : 'lost'\n      });\n\n    case 'GIVE_HINT':\n      var given = null;\n      var newArray = state.numberArray.map(function (number) {\n        if (!given && number.hidden) {\n          number.hidden = false;\n          given = number.value;\n        }\n\n        return number;\n      });\n      return _objectSpread({}, state, {\n        numberArray: newArray,\n        hintsGiven: [].concat(_toConsumableArray(state.hintsGiven), [given])\n      });\n\n    case 'RESET':\n      return _objectSpread({}, initialState);\n\n    default:\n      return state;\n  }\n}\n\nexport var GameContext = React.createContext(null);\nGameContext.displayName = 'GameContext';\nexport default (function (_ref) {\n  var children = _ref.children;\n\n  var _React$useReducer = React.useReducer(reducer, initialState),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      state = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  var value = {\n    player: state.player,\n    rounds: state.rounds,\n    digits: state.digits,\n    gameStarted: state.gameStarted,\n    numberArray: state.numberArray,\n    gameResult: state.gameResult,\n    hintsGiven: state.hintsGiven,\n    setPlayer: function setPlayer(value) {\n      return dispatch({\n        type: 'SET_PLAYER',\n        value: value\n      });\n    },\n    setDigits: function setDigits(value) {\n      return dispatch({\n        type: 'SET_DIGITS',\n        value: value\n      });\n    },\n    setRounds: function setRounds(value) {\n      return dispatch({\n        type: 'SET_ROUNDS',\n        value: value\n      });\n    },\n    resetGame: function resetGame() {\n      return dispatch({\n        type: 'RESET'\n      });\n    },\n    startGame: function startGame() {\n      return dispatch({\n        type: 'START_GAME'\n      });\n    },\n    giveHint: function giveHint() {\n      return dispatch({\n        type: 'GIVE_HINT'\n      });\n    },\n    endGame: function endGame(value) {\n      return dispatch({\n        type: 'END_GAME',\n        value: value\n      });\n    }\n  };\n  return __jsx(GameContext.Provider, {\n    value: value,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, children);\n});","map":{"version":3,"sources":["/Users/slnsrn/Documents/Projects/MyGames/GuessNumber/guess-my-number/context/GameContext.tsx"],"names":["React","createNumberArray","digits","numberArray","i","push","value","Math","floor","random","toString","hidden","initialState","player","rounds","hintsGiven","gameStarted","gameResult","windowValues","reducer","state","action","type","map","el","given","newArray","number","GameContext","createContext","displayName","children","useReducer","dispatch","setPlayer","setDigits","setRounds","resetGame","startGame","giveHint","endGame"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Digit from '../types/Digit'\nimport Player from '../types/Player'\nimport Round from '../types/Round'\n\n\nconst createNumberArray = (digits: number)=>{\n  const numberArray:NumberArray=[]\n  for(let i=0; i<digits; i++){\n    numberArray.push({value:(Math.floor(Math.random()* 10)).toString(), hidden:true})\n  }\n  return numberArray\n}\ntype NumberArray = {value: string, hidden:boolean}[]\n\ninterface State {\n  player: Player\n  digits: Digit\n  rounds: Round\n  gameStarted: boolean\n  numberArray: NumberArray|null\n  hintsGiven: string[]\n  gameResult:'won'|'lost'|null\n  windowValues: { w:number, h:number}\n}\n\nconst initialState:State = {\n  player: 'single',\n  digits: 4,\n  rounds: 0,\n  hintsGiven:[],\n  gameStarted:false,\n  numberArray: null,\n  gameResult: null,\n  windowValues:{}\n}\n\ntype Action = {type: 'SET_PLAYER', value: Player}\n            | {type: 'SET_DIGITS', value: Digit}\n            | {type: 'SET_ROUNDS', value: Round}\n            | {type: 'END_GAME', value:boolean}\n            | {type: 'START_GAME'}\n            | {type: 'GIVE_HINT'}\n            | {type: 'RESET' }\n\nfunction reducer(state:State, action:Action):State {\n  switch (action.type) {\n    case 'SET_PLAYER':\n      return {...state, player: action.value}\n    case 'SET_DIGITS':\n      return {...state, digits: action.value}\n    case 'SET_ROUNDS':\n      return {...state, rounds: action.value}\n    case 'START_GAME':\n        return {...state,\n          gameStarted: true,\n          numberArray: createNumberArray(state.digits)\n        }\n    case 'END_GAME':\n        return {...state,\n          numberArray: state.numberArray?.map(el=>{return {...el, hidden:false}})!,\n          gameResult: action.value ? 'won':'lost'\n        }\n    case 'GIVE_HINT':\n        let given:string|null= null\n        const newArray = state.numberArray!.map(number=>{\n          if(!given && number.hidden){\n            number.hidden=false\n\n            given=number.value\n          }\n          return number\n        })\n        return {...state,\n          numberArray: newArray,\n          hintsGiven:[...state.hintsGiven, given!]\n        }\n    case 'RESET':\n      return {...initialState}\n    default:\n      return state\n  }\n}\n\ntype ContextValue = State & {\n  setPlayer(value: string): void\n  setDigits(value: number): void\n  setRounds(value: number|string): void\n  endGame(value:boolean): void\n  resetGame(): void\n  startGame(): void\n  giveHint(): void\n}\n\nexport const GameContext = React.createContext<ContextValue>(null!)\nGameContext.displayName = 'GameContext'\n\nexport default ({children}:{children:React.ReactNode}) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState)\n\n  const value:ContextValue = {\n    player: state.player,\n    rounds: state.rounds,\n    digits: state.digits,\n    gameStarted: state.gameStarted,\n    numberArray: state.numberArray,\n    gameResult: state.gameResult,\n    hintsGiven:state.hintsGiven,\n    setPlayer: (value:Player) =>\n      dispatch({\n        type: 'SET_PLAYER',\n        value: value\n      }),\n    setDigits: (value:Digit) =>\n      dispatch({\n        type: 'SET_DIGITS',\n        value: value\n      }),\n    setRounds: (value:Round) =>\n      dispatch({\n        type: 'SET_ROUNDS',\n        value: value\n      }),\n    resetGame: () =>\n      dispatch({\n        type: 'RESET'\n      }),\n    startGame: () =>\n      dispatch({\n        type: 'START_GAME'\n      }),\n    giveHint: () =>\n      dispatch({\n        type: 'GIVE_HINT'\n      }),\n    endGame:(value:boolean) =>\n      dispatch({\n        type: 'END_GAME',\n        value: value\n      })\n  }\n\n  return (\n    <GameContext.Provider value={value}>\n      {children}\n    </GameContext.Provider>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}