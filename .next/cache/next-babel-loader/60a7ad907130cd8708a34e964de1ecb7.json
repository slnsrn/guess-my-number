{"ast":null,"code":"var _jsxFileName = \"/Users/slnsrn/Documents/Projects/MyGames/GuessNumber/guess-my-number/components/GameBoard.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useContext, useState, useEffect } from 'react';\nimport cx from 'classnames';\nimport { GameContext } from '../context/GameContext';\nimport { scrollTop } from '../utils';\nimport GuessRow from './GuessRow';\nimport Button from './Button';\nimport SettingsTool from './SettingsTool';\nimport NumberSign from './NumberSign';\nimport PartyBackground from './PartyBackground';\nimport Confetti from './Confetti';\nconst defaultGuess = {\n  value: [],\n  round: 1,\n  result: {},\n  passed: false\n};\n\nconst createControlArray = numberArray => {\n  return numberArray.map(n => {\n    return {\n      value: n.value,\n      checked: false\n    };\n  });\n};\n\nexport default function GameBoard() {\n  const {\n    digits,\n    rounds,\n    gameStarted,\n    resetGame,\n    numberArray,\n    endGame,\n    gameResult\n  } = useContext(GameContext);\n  const {\n    0: guesses,\n    1: setGuesses\n  } = useState([_objectSpread({}, defaultGuess)]);\n  const {\n    0: partyModeOn,\n    1: setPartyModeOn\n  } = useState(false);\n\n  const returnGuessRow = guess => __jsx(GuessRow, {\n    key: guess.round,\n    guess: guess,\n    guessNumber: guessNumber,\n    currentRound: guesses.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 44\n    }\n  });\n\n  useEffect(() => {\n    //reset the game\n    setGuesses([_objectSpread({}, defaultGuess)]);\n  }, [gameStarted]);\n\n  const guessNumber = guessArray => {\n    const controlArray = createControlArray(numberArray);\n    let result = {};\n    const remaining = guessArray.map((val, i) => {\n      if (val === controlArray[i].value) {\n        controlArray[i].checked = true;\n        result.plus = result.plus ? result.plus + 1 : 1;\n      } else {\n        return val;\n      }\n    });\n    controlArray.filter(el => !el.checked).map(el => {\n      if (remaining.includes(el.value)) {\n        const index = remaining.findIndex(n => n === el.value);\n        remaining.splice(index, 1);\n        result.minus = result.minus ? result.minus + 1 : 1;\n      }\n    });\n\n    if (!result.minus && !result.plus) {\n      result.missed = true;\n    }\n\n    const guess = {\n      value: guessArray,\n      round: guesses.length,\n      result: result,\n      passed: true\n    };\n    const newList = guesses.concat();\n    newList.pop();\n    newList.push(guess);\n\n    if (result.plus === digits || rounds === guesses.length) {\n      endGame(result.plus === digits);\n      scrollTop();\n    } else {\n      if (!rounds || guesses.length < rounds) {\n        newList.push(_objectSpread({}, defaultGuess, {\n          round: guesses.length + 1\n        }));\n      }\n    }\n\n    setGuesses(newList);\n  };\n\n  const remainingRounds = rounds - guesses.length;\n  const myMessage = !gameResult ? gameStarted ? `You have ${rounds === 0 ? 'unlimited' : rounds} rounds to guess my number. Start writing your guess and see the results ;)` : 'Set your preferences and start playing!' : `You have ${gameResult}!`;\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: cx({\n      'hidden': !partyModeOn\n    }, 'w-full h-full top-0 left-0'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, __jsx(PartyBackground, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 85\n    }\n  })), __jsx(\"div\", {\n    className: \"px-4 py-6 lg:px-20 md:py-8 shadow bg-white w-full sm-grid-sm md:w-grid-md lg:w-grid-lg xl:w-grid-xl mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"nes-container custom-padding with-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"A Cool's Game\"), __jsx(\"div\", {\n    className: \" ml-12 md:ml-20 mt-12 md:mt-8 flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"nes-balloon from-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-sm md:text-base\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, myMessage), gameStarted && __jsx(\"div\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, \"When you have \"), __jsx(\"div\", {\n    className: \"flex flex-row pl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    className: \"self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, \"a match: \"), __jsx(\"div\", {\n    className: \"self-center nes-badge plus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    className: \"is-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 65\n    }\n  }, \"cuk!\"))), __jsx(\"div\", {\n    className: \"flex flex-row pl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    className: \"self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, \"a wrong placed: \"), __jsx(\"div\", {\n    className: \"self-center nes-badge wide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    className: \"is-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 65\n    }\n  }, \"position wrong!\"))), __jsx(\"div\", {\n    className: \"flex flex-row pl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    className: \"self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, \"no match: \"), __jsx(\"div\", {\n    className: \"self-center nes-badge wide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    className: \"is-error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 65\n    }\n  }, \"Ups! you missed it!\")))))), __jsx(\"i\", {\n    className: \"-mt-8 nes-octocat animate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }), gameResult === 'won' && __jsx(Confetti, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 37\n    }\n  }), __jsx(SettingsTool, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), __jsx(NumberSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }), gameStarted && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, guesses.map(returnGuessRow), __jsx(\"div\", {\n    className: \"pt-\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    onClick: resetGame,\n    label: \"Reset game\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 38\n    }\n  }))))), __jsx(\"label\", {\n    className: \"w-full text-right mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    className: \"nes-checkbox is-dark\",\n    checked: partyModeOn,\n    onChange: () => setPartyModeOn(prevMode => {\n      return !prevMode;\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, \"Enable party mode\")));\n}","map":{"version":3,"sources":["/Users/slnsrn/Documents/Projects/MyGames/GuessNumber/guess-my-number/components/GameBoard.tsx"],"names":["useContext","useState","useEffect","cx","GameContext","scrollTop","GuessRow","Button","SettingsTool","NumberSign","PartyBackground","Confetti","defaultGuess","value","round","result","passed","createControlArray","numberArray","map","n","checked","GameBoard","digits","rounds","gameStarted","resetGame","endGame","gameResult","guesses","setGuesses","partyModeOn","setPartyModeOn","returnGuessRow","guess","guessNumber","length","guessArray","controlArray","remaining","val","i","plus","filter","el","includes","index","findIndex","splice","minus","missed","newList","concat","pop","push","remainingRounds","myMessage","prevMode"],"mappings":"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","sourcesContent":["import { useContext, useState, useEffect } from 'react'\nimport cx from 'classnames'\n\nimport {GameContext} from '../context/GameContext'\nimport {scrollTop} from '../utils'\n\nimport GuessRow from './GuessRow'\nimport Button from './Button'\nimport SettingsTool from './SettingsTool'\nimport NumberSign from './NumberSign'\nimport PartyBackground from './PartyBackground'\nimport Confetti from './Confetti'\n\nimport Guess from '../types/Guess'\nimport GuessResult from '../types/GuessResult'\n\n\nconst defaultGuess:Guess = {value:[], round:1, result:{}, passed:false}\n\nconst createControlArray =(numberArray:{value: string, hidden:boolean}[])=>{\n    return numberArray.map((n)=>{\n        return { value:n.value, checked:false}\n    })\n}\n\nexport default function GameBoard (){\n    const { digits, rounds, gameStarted, resetGame, numberArray, endGame, gameResult} = useContext(GameContext)\n    const [guesses, setGuesses] = useState<Guess[]>([{...defaultGuess}])\n    const [partyModeOn, setPartyModeOn] = useState(false)\n\n    const returnGuessRow = (guess:Guess)=> <GuessRow key={guess.round} guess={guess} guessNumber={guessNumber} currentRound={guesses.length}/>\n\n    useEffect(()=>{\n        //reset the game\n        setGuesses([{...defaultGuess}])\n\n    },[gameStarted])\n\n\n    const guessNumber =(guessArray:string[])=>{\n        const controlArray = createControlArray(numberArray!)\n        let result:GuessResult={}\n\n        const remaining = guessArray.map((val:string, i:number)=>{\n            if(val === controlArray[i].value){\n                controlArray[i].checked = true\n                result.plus = result.plus? result.plus + 1 : 1\n            }else{\n                return val\n            }\n        })\n\n        controlArray.filter(el=>!el.checked).map(el=>{\n            if(remaining.includes(el.value)){\n                const index = remaining.findIndex(n=>n===el.value)\n                remaining.splice(index,1)\n                result.minus = result.minus? result.minus + 1 : 1\n            }\n        })\n\n        if(!result.minus && !result.plus){result.missed=true}\n\n        const guess:Guess = {\n            value: guessArray,\n            round: guesses.length,\n            result:result,\n            passed:true\n        }\n\n        const newList:Guess[]= guesses.concat()\n        newList.pop()\n        newList.push(guess)\n\n\n        if(result.plus === digits || rounds === guesses.length){\n            endGame(result.plus === digits)\n            scrollTop()\n        }else{\n            if(!rounds || guesses.length < rounds){\n                newList.push({...defaultGuess, round:guesses.length+1})\n            }\n        }\n\n        setGuesses(newList)\n\n    }\n    const remainingRounds = rounds - guesses.length\n\n    const myMessage = !gameResult\n                        ? ( gameStarted\n                                ? `You have ${rounds === 0 ? 'unlimited' : rounds} rounds to guess my number. Start writing your guess and see the results ;)`\n                                :'Set your preferences and start playing!')\n                        : `You have ${gameResult}!`\n\n  return (\n    <>\n        <div className={cx({'hidden': !partyModeOn}, 'w-full h-full top-0 left-0')}><PartyBackground/></div>\n        <div className='px-4 py-6 lg:px-20 md:py-8 shadow bg-white w-full sm-grid-sm md:w-grid-md lg:w-grid-lg xl:w-grid-xl mx-auto'>\n            <div className=\"nes-container custom-padding with-title\">\n                <p className=\"title\">A Cool's Game</p>\n                <div className=\" ml-12 md:ml-20 mt-12 md:mt-8 flex\">\n                    <div className=\"nes-balloon from-left\">\n                        <p className='text-sm md:text-base'>{myMessage}</p>\n                        {gameStarted &&\n            <div className='text-sm'>\n                <span className='self-center'>When you have </span>\n                <div className='flex flex-row pl-12'>\n                    <span className='self-center'>a match: </span>\n                    <div className='self-center nes-badge plus'><span className=\"is-success\">cuk!</span></div>\n                </div>\n                <div className='flex flex-row pl-12'>\n                    <span className='self-center'>a wrong placed: </span>\n                    <div className='self-center nes-badge wide'><span className=\"is-warning\">position wrong!</span></div>\n                </div>\n                <div className='flex flex-row pl-12'>\n                    <span className='self-center'>no match: </span>\n                    <div className='self-center nes-badge wide'><span className=\"is-error\">Ups! you missed it!</span></div>\n                </div>\n            </div>}\n                    </div>\n                </div>\n            <i className=\"-mt-8 nes-octocat animate\"></i>\n            {gameResult ==='won' && <Confetti/>}\n            <SettingsTool/>\n            <NumberSign/>\n            {gameStarted &&\n            <div>\n                {guesses.map(returnGuessRow)}\n                <div className='pt-'><Button onClick={resetGame} label='Reset game'/></div>\n            </div>\n            }\n            </div>\n        </div>\n        <label className=\"w-full text-right mt-4\">\n            <input type=\"checkbox\" className=\"nes-checkbox is-dark\" checked={partyModeOn} onChange={()=>setPartyModeOn(prevMode=>{return !prevMode})} />\n            <span>Enable party mode</span>\n         </label>\n    </>)\n}"]},"metadata":{},"sourceType":"module"}